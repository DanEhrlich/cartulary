##: Server Setup on Ubuntu 12.04
##:   Commands to be issued are preceded with a ">".  Comments on things you need to do are wrapped with []'s.
##:   Of course, you can skip anything that's already on your system.  Like, the apt-get's.


[before starting, cd into the git project folder.  probably called "cartulary-master"]


##: 1. Install Apache and PHP5
> sudo apt-get update
> sudo apt-get install -y apache2 php5 php5-cli libapache2-mod-php5 php5-mcrypt php5-curl php5-tidy ccze
[add .index.php. to /etc/apache2/mods-enabled/dir.conf]


##: 2. Install MySql
> sudo apt-get install -y mysql-server php5-mysql
> sudo mysql_secure_installation
[Yes, <enter root password>, Yes, Yes, Yes, Yes]


##: 3. Build Database
> mysql -u root -p
>> create database cartulary;
>> create user cartulary identified by '<make a good password>';
>> grant usage on *.* to cartulary@localhost identified by '<the same good password>';
>> grant all privileges on cartulary.* to cartulary@localhost;
>> exit
> mysql -ucartulary -p cartulary < opt/cartulary/templates/cartulary.sql


##: 4. Configure PHP
> sudo /etc/init.d/apache2 restart
[add the following to the end of /etc/php5/apache2/php.ini and /etc/php5/cli/php.ini]
 [cartulary]
 cartulary_conf="/opt/cartulary"


##: 5. Install Cartulary Files
> sudo mv [/path/to/git/source/cartulary-master] /opt/cartulary


##: 6. Configure Apache
> sudo cp /opt/cartulary/templates/apache.conf /etc/apache2/sites-available/cartulary
> sudo ln -s /etc/apache2/sites-available/cartulary /etc/apache2/sites-enabled/000-cartulary
> sudo /etc/init.d/apache2 restart


##: 7. Create Cartulary Config File
> sudo php /opt/cartulary/bin/confcheck.php
[you're going to answer with 'cartulary' as the username and the password you made in step 3 above as the password]
[your fully qualified hostname will be how the outside world gets to your site.]
[if you mess up, just go edit /opt/cartulary/conf/cartulary.conf by hand to correct]


##: 8. Install Cartulary Admin User
> sudo php /opt/cartulary/bin/usercheck.php
[this step is going to give you a username and password. write it down!]


##: 9. Install Crontab
> sudo php /opt/cartulary/bin/syscheck.php
[this step creates the cron job entries to start the aggregator and support scripts]


##: All done!
